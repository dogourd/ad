## ELK的概念和功能
- **为什么需要日志系统?**  
　　当系统发生故障时, 工程师需要登录到各个服务器上使用`grep|sed|awk`等linux命令去日志里面查找故障原因。
所以应该对这些日志提供一些集中的管理和集中的检索功能, 这样不仅可以提高诊断的效率, 同时可以对系统情况有
一个全面的了解, 避免了事后救火的被动局面。  
　　总结下来,对于日志系统的需求共有三点:   
 　　1. 数据查找, 通过检索日志信息来定位相应的bug, 并以此找到解决方案。  
 　　2. 服务诊断, 通过对日志信息进行统计,分析了解服务器的负荷以及服务运行的状态。  
 　　3. 数据分析, 通过在系统中打一些比较特殊的日志, 比如请求书, 响应数等。可以对日志进行统计做一些进一步的数据分析。  
 
- **什么是ELK?**  
ElasticSearch + LogStash + Kibana
ElasticSearch: 开源的分布式搜索引擎, 特点是分布式, 零配置, 自动发现, Restful的风格接口, 多数据源以及自动搜索负载等。
ELK里ElasticSearch作为日志的存储和日志的检索服务。
LogStash: 完全开源的工具, 可以对日志进行收集, 过滤并将其存储供以后使用, 一个核心用途就是接收服务的日志并将其发送给ES。
Kibana: 也是一个开源免费的工具, 可以为LogStash和ES提供日志分析友好的web界面, 可以帮助开发者汇总、分析和搜索重要的
数据日志, 还可以自定义多种图表。主要用来做对日志数据的一个整理展示, 以及对日志数据的搜索。

## 更优的方案
可以将LogStash更换为FileBeat
LogStash缺点: 基于Ruby的配置, 依赖JDK, 资源消耗较大
FileBeat优点: 基于yaml的配置, 二进制文件无需安装可以直接运行, 占用资源极少
FileBeat缺点: 不可以对日志进行预处理

ES5.x支持Ingest Node进行预处理, 默认都是Ingest Node, 可以将node.ingest设置为false进行关闭。